<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.vue.back.mapper.BoardMapper">

  <select id="getBoardCategory" resultType="com.vue.back.dto.BoardTypeDto">
  	SELECT
  		uid,
  		type,
  		name,
  		created_at as createdAt,
  		updated_at as updatedAt
  	FROM
  		board_type
  	ORDER BY
  		UID 
 	ASC
  </select>
  
  <select id="getBoardList" resultType="com.vue.back.dto.BoardDto">
    SELECT
    	uid,
    	title,
    	created_user,
    	view_cnt,
    	created_at
    FROM
    	board
    WHERE
    	is_del = 0
    ORDER BY
    	UID
    ASC
  </select>         
  
  <insert id="insertBoard" parameterType="com.vue.back.dto.BoardDto">
  <!-- 그럼 이제 넣기만해면 댐 끝 -->
  	INSERT INTO board(
  		title,
  		type,
  		content,
  		created_user,
  		created_at
  		)
   	VALUES(
   		#{title},
   		#{type},
   		#{content},
   		#{created_user},
   		now()
   		)
  </insert>
  
  <select id="getBoardDetail" parameterType="long" resultType="com.vue.back.dto.BoardDto">	
   	SELECT
   		uid,
   		title,
   		content,
   		created_user,
   		created_at,
 		view_cnt
 	FROM
 		board
 	WHERE
 		uid = #{uid}
  </select>
  
<insert id="updateGoodBoard" parameterType="com.vue.back.dto.BoardGoodBadDto">
  	INSERT INTO good_bad(
  		mother_uid,
  		created_user,
  		good_bad,
  		created_at
  		)
  	VALUES(
  		#{uid},
  		#{created_user},
  		'G',
  		now()
  	)
  	ON DUPLICATE KEY UPDATE
  		good_bad = 'G'
  				
  </insert> 
  
  <insert id="updateBadBoard" parameterType="com.vue.back.dto.BoardGoodBadDto">
  	INSERT INTO good_bad(
  		mother_uid,
  		created_user,
  		good_bad,
  		created_at
  		)
  	VALUES(
  		#{uid},
  		#{created_user},
  		'B',
  		now()
  	)
  	ON DUPLICATE KEY UPDATE
  		good_bad = 'B'
  </insert>
  
  
</mapper>